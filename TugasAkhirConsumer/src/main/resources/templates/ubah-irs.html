<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<div th:replace="fragment :: header"></div>
<body class="profile-page sidebar-collapse">
<div th:replace="fragment :: navbarMahasiswa"></div>

    <div class="wrapper">
        <div class="page-header page-header-small" filter-color="orange">
            <div class="page-header-image" data-parallax="true" style="background-image: url('/img/UI.jpg');">
            </div>
            <div class="container">
                <div class="content-center">
                    <h1 class="title">UBAH IRS</h1>
                </div>
            </div>
        </div>

        <div class="section">
            <div class="container">
                <div class="row">
                    <div class="col-lg-3">
                        <div >
                            <!-- Tabs with Background on Card -->
                            <div class="card">
                                <ul class="nav nav-tabs nav-tabs-neutral justify-content-center" role="tablist" data-background-color="orange">
                                </ul>
                                <div class="card-body">
                                    <!-- Tab panes -->
                                    <div class="tab-content">
                                        <p>SKS Dapat Diambil</p>
                                        <h2>24</h2>
                                        <p>SKS Diambil</p>
                                        <h2>0</h2>
                                        <p>Term</p>
                                        <h5>GASAL 2017/2018</h5>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-9">
                        <div>
                            <!-- Tabs with Background on Card -->
                            <div class="card">
                                <ul class="nav nav-tabs nav-tabs-neutral justify-content-center" role="tablist" data-background-color="orange">
                                </ul>
                                <h3 class="title">Daftar Kelas</h3>
                                <div class="card-body" id="checkRadios">
                                    <!-- Tab panes -->
                                    <div class="justify-content-left"><h5>CSC1234567 - Sistem Interaksi</h5></div>
                                    <form>
                                        <div class="tab-content text-center">
                                            <div class="tab-pane active" id="home1" role="tabpanel">
                                                <table class="table table-striped table-responsive">
                                                    <thead>
                                                    <tr>
                                                        <th class="text-center">Kelas</th>
                                                        <th class="text-center">Dosen</th>
                                                        <th class="text-center">Ruangan</th>
                                                        <th class="text-center">Jadwal</th>
                                                        <th class="text-center"></th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    <tr>
                                                        <td>A</td>
                                                        <td>Harry Budi Santoso, PhD</td>
                                                        <td>2404</td>
                                                        <td>Selasa, 08.00 - 09.50<br/>Kamis, 10.00 - 10.50</td>
                                                        <td>
                                                            <input type="radio" id="1" class="radio" name="1" value="1" />
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>B</td>
                                                        <td>Harry Budi Santoso, PhD</td>
                                                        <td>2307<br/>2303</td>
                                                        <td>Rabu, 08.00 - 09.50<br/>Jumat, 10.00 - 10.50</td>
                                                        <td>
                                                            <input type="radio" id="2" class="radio" name="1" value="2" />
                                                        </td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>

                                        <!--END SECTION MATKUL-->

                                        <div class="justify-content-left"><h5>CSC1234567 - Jaringan Komunikasi Data</h5></div>

                                        <div class="tab-content text-center">
                                            <div class="tab-pane active" id="home1" role="tabpanel">
                                                <table class="table table-striped table-responsive">
                                                    <thead>
                                                    <tr>
                                                        <th class="text-center">Kelas</th>
                                                        <th class="text-center">Dosen</th>
                                                        <th class="text-center">Ruangan</th>
                                                        <th class="text-center">Jadwal</th>
                                                        <th class="text-center"></th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    <tr>
                                                        <td>A</td>
                                                        <td>Rizal Fathoni Aji, M.Kom</td>
                                                        <td>Aula</td>
                                                        <td>Senin, 08.00 - 09.50 <br/> Rabu, 10.00 - 10.50</td>
                                                        <td>
                                                            <input type="radio" id="3" class="radio" name="2" value="3" />
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>B</td>
                                                        <td>Heri Kurniawan, M.Kom</td>
                                                        <td>2307 <br/>2303</td>
                                                        <td>Senin, 08.00 - 09.50<br/>Rabu, 10.00 - 10.50</td>
                                                        <td>
                                                            <input type="radio" id="4" class="radio" name="2" value="4" />
                                                        </td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                        <input type="hidden" id="id_mahasiswa" name="id_mahasiswa" th:value="${irs.id_mahasiswa}" />
                                        <input type="hidden" id="id_term" name="id_term" th:value="${irs.id_term}" />
                                        <input type="hidden" id="kelas" name="kelas" th:value="${kelas}" />
                                    </form>
                                    <!--END SECTION MATKUL-->

                                    <div class="text-center"><button class="btn btn-primary btn-round" id="submit" type="button">Simpan</button></div>
                                </div>
                            </div>
                        </div>             
                    </div>                    
                </div>
            </div>
        </div>

        <div th:replace="fragment :: footer"></div>
    </div>
</body>
<div th:replace="fragment :: javascript"></div>

<script>
    $(document).ready(function () {
        var radio = {};

        var irs_list = $('#kelas').val().split(",");
        for(var kelas in irs_list){
            $('#' + irs_list[kelas]).prop("checked", true);
            radio[$('#' + irs_list[kelas]).attr('name')] = $('#' + irs_list[kelas]).val();
        }

        $('.radio').click(function () {
            if(radio[$(this).attr('name')] == $(this).attr('value')){
                $(this).prop('checked', false);
                delete radio[$(this).attr('name')];
            } else {
                radio[$(this).attr('name')] = $(this).attr('value');
            }

            console.log(radio);
        });

        $('#submit').click(function () {
            var submit = new Array();

            for (var irs in radio) {
                submit.push(radio[irs]);
            }

            var id_mahasiswa = $('#id_mahasiswa').val();
            var id_term = $('#id_term').val();

            $.ajax({
                type: 'POST',
                url: "/irs/update",
                dataType: "html",
                data: {
                    irs_list: submit.toString(),
                    id_mahasiswa: id_mahasiswa,
                    id_term: id_term
                },
                success: function (response) {
                    window.location.href = "/irs/view/" + response;
                }
            });
        });
    });
</script>

</html>