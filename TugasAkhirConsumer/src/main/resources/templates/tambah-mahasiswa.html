<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
<link rel="apple-touch-icon" sizes="76x76" href="./img/apple-icon.png" />
<link rel="icon" type="image/png" href="./img/favicon.png" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<title>SIAK - Beranda</title>
<meta
	content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no'
	name='viewport' />
<!--     Fonts and icons     -->
<link
	href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200"
	rel="stylesheet" />
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />
<!-- CSS Files -->
<link href="../css/bootstrap.min.css" rel="stylesheet" />
<link href="../css/now-ui-kit.css?v=1.1.0" rel="stylesheet" />
<!-- CSS Just for demo purpose, don't include it in your project -->
<link href="../css/demo.css" rel="stylesheet" />
</head>

<body class="profile-page sidebar-collapse">
	<!-- Navbar -->
	<nav
		class="navbar navbar-expand-lg bg-primary fixed-top navbar-transparent "
		color-on-scroll="400">
		<div class="container">
			<div class="navbar-translate">
				<a class="navbar-brand" href="../index.html" rel="tooltip"
					title="SIAK" data-placement="bottom" target="_blank"> SISTEM
					INFORMASI AKADEMIK </a>
			</div>
			<div class="collapse navbar-collapse justify-content-end"
				id="navigation" data-nav-image="./../img/blurred-image-1.jpg">
				<ul class="navbar-nav">
					<li class="nav-item"><a class="nav-link" href="#" onclick="">
							<p>Dashboard</p>
					</a></li>
					<li class="nav-item"><a class="nav-link" href="#"
						target="_blank">
							<p>Tambah Mahasiswa</p>
					</a></li>
					<li class="nav-item"><a class="nav-link" href="#"
						target="_blank">
							<p>Logout</p>
					</a></li>
				</ul>
			</div>
		</div>
	</nav>
	<!-- End Navbar -->

	<div class="wrapper">
		<div class="page-header page-header-small" filter-color="orange">
			<div class="page-header-image" data-parallax="true"
				style="background-image: url('../img/UI.jpg');"></div>
			<div class="container">
				<div class="content-center">
					<h3 class="title">Tambah Mahasiswa</h3>
				</div>
			</div>
		</div>

		<div class="section">
			<div class="container">
				<div class="row">
					<div class="col-lg-12">
						<div>
							<!-- Tabs with Background on Card -->
							<div class="card">
								<ul class="nav nav-tabs nav-tabs-neutral justify-content-center"
									role="tablist" data-background-color="orange">
								</ul>
								<h3 class="title">Tambah Mahasiswa</h3>
								<div class="card-body">
									<!-- Tab panes -->
									<div class="tab-content text-left">
										<div class="tab-pane active" id="home1" role="tabpanel">
											<form th:action="@{/mahasiswa/add}" method="post">
												<div class="row">
													<div class="col-md-12">
														<div class="form-group">
															<label>Nama Lengkap</label> <input type="text" value=""
																name="nama" placeholder="Nama Lengkap"
																class="form-control" />
														</div>
													</div>
													<input name="is_dapat_lulus" type="hidden"
														class="form-control" /> <input name="ip" type="hidden"
														class="form-control" /> <input name="ipk" type="hidden"
														class="form-control" /> <input name="sks_total"
														type="hidden" class="form-control" />

													<div class="col-md-12">
														<div class="form-group">
															<label>NPM</label> <input type="text" value="" name="npm"
																placeholder="NPM" class="form-control" />
														</div>
													</div>
													<div class="col-md-12">
														<div class="form-group">
															<label>Universitas</label> <select class="form-control"
																name="id_univ" id="univ">
																<option value="">--Pilih Universitas</option>
																<option th:each="univ : ${univ}"
																	th:value="${univ.id_univ}" th:text="${univ.nama_univ}">
																</option>
															</select>
														</div>
													</div>
													<div class="col-md-12">
														<div class="form-group">
															<label>Fakultas</label> <select class="form-control"
																name="id_fakultas" id="fakultas">
																<option value="">--Pilih fakultas</option>

															</select>
														</div>
													</div>
													<div class="col-md-12">
														<div class="form-group">
															<label>Program Studi</label> <select class="form-control"
																name="id_program_studi" id="prodi">
																<option value="">--Pilih Prodi</option>
															</select>
														</div>
													</div>
													<div class="col-md-12">
														<div class="form-group">
															<button class="btn btn-primary" type="submit"
																name="action">Tambah</button>
														</div>
													</div>
												</div>
											</form>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div th:replace="fragment :: footer"></div>
	</div>
</body>
<div th:replace="fragment :: javascript"></div>
<script type="text/javascript">
	$(document).ready(function(){
		$('select[name="id_univ"]').change(function() {
			var id = $(this).val();
			$.ajax({
				type:'POST',
				url : "/mahasiswa/add/fakultas",
				dataType: "html",
				data: {
					namafakultas: id
				},
				success: function(response) {
					var obj = JSON.parse(response);
					var html = '<option value="">--Pilih fakultas</option>';
		            for(var i in obj ){
		                 html += '<option value="' + obj[i].id_fakultas + '">' + obj[i].nama_fakultas + '</option>';
		                 console.log(html);
		             }
		            document.getElementById('fakultas').innerHTML = html;
				}
			})
		});
		$('select[name="id_fakultas"]').change(function() {
			var id_univ = $('#fakultas').val();
			var id_fakultas = $(this).val();
			console.log($(this).val());
			$.ajax({
				type:'POST',
				url : "/mahasiswa/add/prodi",
				dataType: "html",
				data: {
					namafakultas: id_univ,
					namaprodi: id_fakultas
				},
				success: function(response) {
					var obj = JSON.parse(response);
					var html = '<option value="">--Pilih Prodi</option>';
		            for(var i in obj ){
		                 html += '<option value="' + obj[i].id_prodi + '">' + obj[i].nama_prodi + '</option>';
		                 console.log(html);
		             }
		            document.getElementById('prodi').innerHTML = html;
				}
			})
		});
	});
	</script>
</html>